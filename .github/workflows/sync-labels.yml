# Sync org-wide labels to all repositories
#
# Triggers:
#   - Push to labels.yml on main branch
#   - Manual dispatch (for initial sync)
#
# Required secrets:
#   - GC_ORG_ADMIN_TOKEN: PAT with repo scope for all org repos
#     (Fine-grained: Issues Read+Write, Metadata Read)

name: Sync Labels

on:
  push:
    branches: [main]
    paths:
      - labels.yml
  workflow_dispatch:

jobs:
  sync:
    name: Sync labels to repositories
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Sync labels
        uses: micnncim/action-label-syncer@v1
        with:
          manifest: labels.yml
          repository: |
            geocubes/geocubes
            geocubes/geocubes-org
            geocubes/infra
            geocubes/dashboard-2SBSS
            geocubes/dashboard-ZSTH
          prune: false
          token: ${{ secrets.GC_ORG_ADMIN_TOKEN }}
